#!/bin/sh
#
# Set up environment variables for general build tool to operate
#
export ZOPEN_TYPE="TARBALL"
export ZOPEN_TARBALL_URL="https://ftp.gnu.org/gnu/libtool/libtool-2.4.tar.gz"
export ZOPEN_TARBALL_DEPS="curl gzip make m4 perl autoconf"

export ZOPEN_GIT_URL="https://github.com/autotools-mirror/libtool.git"
export ZOPEN_GIT_DEPS="git make m4 perl autoconf automake help2man makeinfo xz"

export ZOPEN_EXTRA_CFLAGS=""
export ZOPEN_EXTRA_LDFLAGS=""

if [ "${ZOPEN_TYPE}x" = "TARBALLx" ]; then
	export ZOPEN_BOOTSTRAP=skip
fi

zopen_check_results()
{
    chk="$2_check.log"

    totalTests=$(egrep "PASS:|FAIL:" *_check.log | cut -f1 -d " "| wc -w)
    failures=$(egrep "FAIL:" *_check.log | cut -f1 -d " " | wc -w)

    cat <<TEST
actualFailures:$failures
totalTests:$totalTests
expectedFailures:0
TEST
}

zopen_append_to_env()
{
  cat <<EOF
export ACLOCAL_PATH="\${PWD}/share/aclocal:\$ACLOCAL_PATH"
EOF
}
